---
title: "Git"
date: 2017-12-11T10:41:22+08:00
slug: git
tags: [git]
---

Some git notes.

## Links

- [Semantic Versioning 2.0.0](https://semver.org/)
- [How to Write a Git Commit Message](https://chris.beams.io/posts/git-commit/)
- [gitmoji](https://gitmoji.carloscuesta.me/)


## Basic configuration

### Git config

``` sh
# List configuration
git config -l
git config --global -l

# Config user's info
git config --global user.name "Mr.Blue"
git config --global user.email "silverhugh.77@gmail.com"

# Delete config
git config --global --unset user.username

# Config editor for git, use vim, nano or so on
git config --global core.editor "vim"
# True way to Commit
#   `git commit` will open an vim editor (set by command before)
#   write the commit message in it and `:x` to commit
```

<!--more-->


### Git alias

``` sh
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.us 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'
git config --global alias.ls 'log --oneline -20'
```

## Git Remote

## Add a remote branch

Normal command:

```
git remote add origin git@githubo.com:<username>/<reponame>.git
```
---

There is some thing we can do to `github.com`.
By using `~/.ssh/conig` we can use different private key for different repo:

SSH config:

``` sh
Host <hostname>
    HostName github.com
    IdentityFile <path of private key>

Host *
    IdentityFile <path of default private key>
```

Commands:

``` sh
git clone git@<hostname>:<username>/<reponame>.git
git remote add origin git@<hostname>:<username>/<reponame>.git
```

---

When you create create a custom git server by run:

``` sh
git init --bare
```

You can add this repo by running:

``` sh
git remote add origin ssh://git@<ip>:<port>/~/<path relative to $HOME>.git
git remote add origin ssh://git@<ip>:<port>/<path relative to />.git
```

### Setting default upstream

``` sh
#  -u to set upstream, next time you can run only `git push` or `git pull`
git push -u origin master
```

### Overwrite

Overwrite remote branch:

``` sh
git push -f origin master
```

Overwrite local branch:

``` sh
 git fetch --all
 git reset --hard origin/master
```

## Feel free to regret

### Modify commit message or author information

Only latest commit:

- `git commit --amend --reset-author` This will user your author information in `git config -l`.
- `git commit --amend --author="Mr.Blue <silverhugh.77@gmail.com>"`
- `--no-edit` will keep old commit message.
- Without it, it will open an editor which is configured by `git config core.editor=nvim`

Any commits:

- `git rebase -i <commit-ID>` Modify commits after `<commit-ID>`
  - or just `git rebase -i --root` from start.
- It will open an editor. There are enough information in opened editor.
- If you want to modify some commits, just change `pick` of that line to `edit`
  - Just `remove` that line if you want remove a commit.
- Save and exit the editor.
- Then your next step is to modify those chosen commits one by one.
    - Use `git rebase --continue` to go to next commit point
- Treat them with the method showed in the previous part.

## Git tags

### Create a tag

- Lightweight tag: `git tag <tag-name>`
- Signed tag (Recommend): `git tag -a <tag-name> -m <message>`
  - without `-m` will launch editor

### Remove a tag

`git tag -d <tag-name>`

### Push tag to remote

`git push origin <tag-name>`

### Switch to a tag

`git checkout tags/<tag_name>`

## Remove file from git

`--cached` will reserve the file in your disk.

- `git rm <file> --cached`
- `git rm -r <folder> --cached`
