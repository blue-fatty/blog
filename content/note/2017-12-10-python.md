---
title: "Python"
date: 2017-12-10T21:05:14+08:00
slug: python
---

Some python notes.

## Package notes

- [Keras](/note/keras)

## Quick notes

`enumerate`.

``` python
colors = ['red', 'green', 'blue', 'yellow']

for i, color in enumerate(colors):
    print i, '-->', color
```

- `range`
- `xrange`
- `zip`
- `izip`

`zip`.

``` python
x = [1, 2, 3]
y = [4, 5, 6]
zipped = zip(x, y)
zipped
# [(1, 4), (2, 5), (3, 6)]
x2, y2 = zip(*zipped)
x == list(x2) and y == list(y2)
# True
```

**`self(x)`**.

```
def __call__(self, x):
    pass
```

- `pip frreze > requirements.txt`
- `pip install -r requirements.txt`

<!--more-->

**hashable**: `object.__hash__()`, the key of dict must be hasable

- knn
    - `np.linalg.norm(X, ord=np.inf, axis=1)`
    - `np.power(X, 2)`
    - `np.matmul(A, B)`, matrix multiplication
        - `np.multip`
    - `np.array(np.array_split(<array>))`
    - `np.concatenate()`
    - `np.argsort(X)[:k]`, indices of top k min value
    - `np.bincount(X)`, `cnt[X[i]]+=1`
    - `np.argmax()`
- svm
    - `np.hstack((a, b))`, (2, 3) + (2, 1) => (2, 4)
        - `np.stack((a, b), axis=0)`, (2, 3) + (2, 3) => (2, 2, 3)
        - `np.vstack((a, b))`
    - `np.dot()`
        1. 2-D array, matrix multiplication
        1. 1-D arrays, inner product
    - http://www.scipy-lectures.org/intro/numpy/operations.html
        - `np.allclose()`?
        - `np.any()`, `np.all()`
        - `np.unique()`, like `drop_duplicate()` in Keras
        - `np.cumsum()`
            - [Random Walks ](http://www.mit.edu/~kardar/teaching/projects/chemotaxis(AndreaSchmidt)/random.htm)
                - \\(d^2=n\\)
        - `distance = np.abs(a - a[:, np.newaxis])`
        - `np.ogrid()`, `np.mgrid()`
        - `np.ravel(a, order='C')`, array flatten
            - `C`, C-like order, [0, 0] => [0, 1] => [0, 2] => [1, 0] => ...
            - `F`, Fortran-like order, [0, 0] => [1, 0] => [2, 0] => [0, 1] => ...
            - For multi-dimension, `C` means index front change slow
            - return a view, view means you change the view, the original will data also be changed
        - `np.reshape(a, newshape,, order='C')`
        - `np.transpose(a, axes=None)`
            - default, a.T
            - `np.transpose(a, axes=[1,0,2])`, `a[1,2,3] == a[2,1,3] = True`
            - transpose doesn't change the plane, or cube or hyper-shape
            - return a view
        - `np.resize()`
            - if fill, fill required number of elements, repeated in the order
                - `np.resize([0,1,2], 5)` => [0,1,2,0,1]
        - `np.sort(a, axis=1)`
            - axis selected elements which index changed response to axis
        - `np.argsort()`
        - `np.lookfor()`*
- tricks
    - `y, x = x, y`
    - `result = 1 < n < 10`
    - `x = (classA if y == 1 else classB)(param1, param2)`
    - `_`
    - `pdb.set_trace()`
    - `python -m http.server`
        - `python -m SimpleHTTPServer`
    - `[1, 2, 3][::-1]` => `[3, 2, 1]`
    - Unpack
        - `testDict = {'x': 1, 'y': 2, 'z': 3}`
        - `func(*testDict)` => `func('x', 'y', 'z')`
        - `func(**testDict)` => `func(1, 2, 3)`
    - `reduce(func, sequence[, initial])`
        - `functools.reduce()`
    - `from IPython.core.debugger import set_trace`
        - `n[ext]`
        - `s[tep]`
        - `c[ontinue]`
        - `l[ist]`
        - `p[rint]`, `pp`
            - `pp locals()`, `pp globals()`
        - `a[rgs]`
    - `list(itertools.chain.from_iterable(a))`
        - `[1, 2], [3, 4], [5, 6]]` => `[1, 2, 3, 4, 5, 6]`
        - nested list of tuples
            - `list(more_itertools.collapse(test))`
    - bitwise operators
        - `<<`, `>>`
        - `&`, and
        - `|`, or
        - `~`, not
        - `^`, exclusive or
    - `max(set(test), key=test.count)`, most frequent value
    - `sys.getrecursionlimint()`
    - `sys.getsizeof(x)`, object size
    - `dict(zip(keys, values))`, two arrays to a dict

**Multiply/Add all items in an array**

- `np.prod([2, 3, 4])` => `24`
- `np.sum([2, 3, 4])` => `9`

### Binary representation

``` py
bin(True)   # '0b1'
bin(False)  # '0b0'
bin(~True)  # '-0b10'
bin(~False) # '-0b1'
```

---

### Identity of object

`id(<object>)`

---

## Jupyter Notebook

### Links

- [Running a notebook server](http://jupyter-notebook.readthedocs.io/en/stable/public_server.html)
- [Installing jupyter_contrib_nbextensions](http://jupyter-contrib-nbextensions.readthedocs.io/en/latest/install.html)
- [jupyter-vim-binding](https://github.com/lambdalisue/jupyter-vim-binding)
- [line number](https://stackoverflow.com/a/29916445)
- [Kernels for different environments](http://ipython.readthedocs.io/en/stable/install/kernel_install.html#kernels-for-different-environments)

### Tips

- `!pwd`
- `np.dot??`


**Auto reload external python modules**

https://ipython.org/ipython-doc/3/config/extensions/autoreload.html

``` py
%load_ext autoreload
%autoreload 2
```

